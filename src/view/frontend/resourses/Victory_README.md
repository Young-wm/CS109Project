# 游戏胜利界面使用指南

## 概述

我们为游戏添加了一个美观的胜利界面，当玩家成功完成关卡（曹操走到底部中央位置）时，会显示这个界面。胜利界面包含以下功能：
- 显示恭喜信息
- 显示本关卡花费的时间
- 显示移动的步数
- 支持自定义背景图片
- 提供"返回关卡选择"和"下一关"两个按钮

## 使用方法

### 如何添加背景图片

1. 将您的背景图片文件放入 `src/view/frontend/resourses/` 目录下
2. 根据不同关卡，图片命名规则如下：
   - 第一关：`victory_background.jpg`
   - 第二关：`victory_background2.jpg`
   - 第三关：`victory_background3.jpg`
   - 第四关：`victory_background4.jpg`

### 背景图片要求

- 支持的图片格式：jpg, png, gif
- 图片尺寸没有严格限制，系统会自动进行等比例缩放
- 为了获得最佳显示效果，建议：
  - 使用宽度至少600像素、高度至少400像素的图片
  - 使用接近3:2比例的图片
  - 选择较暗或对比度高的图片，以确保文字清晰可见

### 图片缩放逻辑

系统会根据窗口和图片的比例关系，自动处理图片显示：

1. 如果图片比例与窗口比例相同，图片会恰好填满整个窗口
2. 如果图片比例与窗口比例不同，系统会按以下规则处理：
   - **图片较宽**：按窗口高度等比例缩放，水平方向上可能会裁剪两侧内容
   - **图片较高**：按窗口宽度等比例缩放，垂直方向上可能会裁剪上下内容

这种处理方式确保图片不会变形，同时能填满整个窗口，提供最佳的视觉体验。

## 技术实现

我们添加了以下几个类来实现胜利界面功能：

1. `VictoryPanel.java` - 胜利界面的面板组件，负责显示文字信息和按钮
2. `VictoryFrame.java` - 胜利界面的窗口，包含逻辑处理和导航功能
3. `ResourceManager.java` - 资源管理器，用于加载和缓存图片资源

并修改了各个关卡的`GameFrame`类中的`checkAndShowWinDialog()`方法，使用新的胜利界面替代之前的简单对话框。

## 自定义选项

### 修改背景图片

如果您想使用不同名称的背景图片，可以修改各个关卡的`GameFrame`类中的`checkAndShowWinDialog()`方法，更改最后一个参数：

```java
view.frontend.resourses.VictoryFrame.showVictory(
        formattedTime, 
        steps, 
        1,  // 关卡编号
        "your_custom_image.jpg");  // 自定义图片文件名
```

### 修改胜利界面样式

如果您想修改胜利界面的样式，可以编辑`VictoryPanel.java`文件，调整布局、颜色、字体等元素。

### 修改按钮行为

如果您想修改按钮的行为（例如添加声音效果、分数存储等功能），可以编辑`VictoryFrame.java`文件中的`addButtonListeners()`方法。

## 注意事项

- 如果没有找到指定的背景图片，胜利界面将使用默认的蓝色背景
- 文字使用白色显示，背景会添加半透明黑色遮罩，以确保在任何背景上文字都清晰可见
- "下一关"按钮在最后一关（第四关）之后会返回关卡选择界面，并显示通关信息 